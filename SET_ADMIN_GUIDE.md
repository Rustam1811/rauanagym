# –ö–∞–∫ –Ω–∞–∑–Ω–∞—á–∏—Ç—å –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ üëë

## –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è production security rules, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –±–µ–∑ —Ä–æ–ª–∏ `admin`. –ù–æ —á—Ç–æ–±—ã –Ω–∞–∑–Ω–∞—á–∏—Ç—å –∞–¥–º–∏–Ω–∞, –Ω—É–∂–µ–Ω... –∞–¥–º–∏–Ω! ü§î

## –†–µ—à–µ–Ω–∏–µ: 3 —Å–ø–æ—Å–æ–±–∞

### ‚≠ê –°–ø–æ—Å–æ–± 1: Firebase Console (–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π)

1. **–£–∑–Ω–∞–π—Ç–µ —Å–≤–æ–π User ID:**
   - –ó–∞–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - –û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools (F12)
   - –í Console –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: `firebase.auth().currentUser.uid`
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ UID

2. **–û—Ç–∫—Ä–æ–π—Ç–µ Firestore Console:**
   ```
   https://console.firebase.google.com/project/rauanagym/firestore
   ```

3. **–ù–∞–π–¥–∏—Ç–µ —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é `users`
   - –ù–∞–π–¥–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç —Å –≤–∞—à–∏–º UID

4. **–î–æ–±–∞–≤—å—Ç–µ —Ä–æ–ª—å admin:**
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç
   - –ù–∞–∂–º–∏—Ç–µ "Add field"
   - Field name: `role`
   - Type: `string`
   - Value: `admin`
   - –ù–∞–∂–º–∏—Ç–µ "Add"

5. **–ì–æ—Ç–æ–≤–æ!** –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

---

### üöÄ –°–ø–æ—Å–æ–± 2: Node.js —Å–∫—Ä–∏–ø—Ç (–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)

1. **–£–∑–Ω–∞–π—Ç–µ —Å–≤–æ–π User ID** (–∫–∞–∫ –≤ —Å–ø–æ—Å–æ–±–µ 1)

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ firebase-admin:**
   ```bash
   npm install firebase-admin
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:**
   ```bash
   node set-admin.mjs YOUR_USER_ID
   ```
   
   –ü—Ä–∏–º–µ—Ä:
   ```bash
   node set-admin.mjs kX7f9mWq2LhR3jT8pN5vB1sC4dE
   ```

4. **–í—ã —É–≤–∏–¥–∏—Ç–µ:**
   ```
   üîç Looking for user: kX7f9mWq2LhR3jT8pN5vB1sC4dE
   ‚úÖ Successfully set admin role!
   
   User: John Doe
   Email: john@example.com
   Role: admin
   
   üéâ Done!
   ```

---

### üõ†Ô∏è –°–ø–æ—Å–æ–± 3: –í—Ä–µ–º–µ–Ω–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ (–î–ª—è –æ–¥–Ω–æ–≥–æ —Ä–∞–∑–∞)

**‚ö†Ô∏è –í–ê–ñ–ù–û: –£–¥–∞–ª–∏—Ç–µ —ç—Ç–æ –ø—Ä–∞–≤–∏–ª–æ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!**

1. **–û—Ç–∫—Ä–æ–π—Ç–µ `firestore.rules`**

2. **–î–æ–±–∞–≤—å—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ:**
   ```javascript
   // TEMPORARY RULE - DELETE AFTER SETTING ADMIN
   match /users/YOUR_ACTUAL_UID {
     allow update: if true;
   }
   ```
   
   –ó–∞–º–µ–Ω–∏—Ç–µ `YOUR_ACTUAL_UID` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π UID!

3. **Deploy –ø—Ä–∞–≤–∏–ª–∞:**
   ```bash
   firebase deploy --only firestore:rules
   ```

4. **–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–¥:**
   ```javascript
   // –í Browser Console (F12)
   import { doc, updateDoc } from 'firebase/firestore';
   import { db } from './lib/firebase/config';
   
   const userId = firebase.auth().currentUser.uid;
   await updateDoc(doc(db, 'users', userId), {
     role: 'admin'
   });
   console.log('‚úÖ Admin role set!');
   ```

5. **–£–î–ê–õ–ò–¢–ï –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ –∏–∑ `firestore.rules`**

6. **Deploy —Å–Ω–æ–≤–∞:**
   ```bash
   firebase deploy --only firestore:rules
   ```

---

## –ö–∞–∫ —É–∑–Ω–∞—Ç—å —Å–≤–æ–π User ID

### –°–ø–æ—Å–æ–± 1: Developer Console
```javascript
// –í Browser Console (F12)
firebase.auth().currentUser.uid
```

### –°–ø–æ—Å–æ–± 2: Firebase Authentication Console
```
https://console.firebase.google.com/project/rauanagym/authentication/users
```
- –ù–∞–π–¥–∏—Ç–µ —Å–≤–æ–π email
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ User UID

### –°–ø–æ—Å–æ–± 3: –í –∫–æ–¥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–î–æ–±–∞–≤—å—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ –≤ `src/app/page.tsx`:
```typescript
console.log('My User ID:', user?.uid);
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–ü–æ—Å–ª–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è admin —Ä–æ–ª–∏:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Firestore Console**
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–µ `role`** –≤ –≤–∞—à–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ users
3. **–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø:**
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É
   - –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç - –≤—ã –∞–¥–º–∏–Ω! ‚úÖ

---

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∞–¥–º–∏–Ω–æ–≤

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—ã —Å—Ç–∞–ª–∏ –ø–µ—Ä–≤—ã–º –∞–¥–º–∏–Ω–æ–º, –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–∑–Ω–∞—á–∞—Ç—å –¥—Ä—É–≥–∏—Ö:

### –ß–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–±—É–¥—É—â–∞—è —Ñ–∏—á–∞)
–°–æ–∑–¥–∞–π—Ç–µ admin panel —Å —Ñ—É–Ω–∫—Ü–∏–µ–π –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ä–æ–ª–µ–π

### –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
```bash
node set-admin.mjs ANOTHER_USER_ID
```

### –ß–µ—Ä–µ–∑ Firestore Console
–í—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤—å—Ç–µ `role: "admin"` –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

---

## Troubleshooting

### ‚ùå "User not found"
**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —Ö–æ—Ç—è –±—ã —Ä–∞–∑ –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞–ª—Å—è –ø—Ä–æ—Ñ–∏–ª—å –≤ Firestore

### ‚ùå "Permission denied" –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∫—Ä–∏–ø—Ç–∞
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `rauanagym-firebase-adminsdk-fbsvc-91ee72ab56.json` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞

### ‚ùå –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** 
1. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞
2. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+Shift+R)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ Firestore –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –µ—Å—Ç—å –ø–æ–ª–µ `role: "admin"`

### ‚ùå "firebase-admin not found"
**–†–µ—à–µ–Ω–∏–µ:** 
```bash
npm install firebase-admin
```

---

## Security Notes üîí

- ‚úÖ –†–æ–ª—å admin –¥–∞–µ—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ
- ‚úÖ –ù–∞–∑–Ω–∞—á–∞–π—Ç–µ admin —Ç–æ–ª—å–∫–æ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º –ª—é–¥—è–º
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–æ–≤ –≤ Firestore
- ‚ùå –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Å—Ç–∞–≤–ª—è–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ `if true` –≤ production
- ‚ùå –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `set-admin.js` —Å –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–º–∏ UID

---

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±**: –°–ø–æ—Å–æ–± 1 (Firebase Console) - —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞.
